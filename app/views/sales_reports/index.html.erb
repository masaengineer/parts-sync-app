<%# ページヘッダー %>
<div class="container mx-auto px-4 py-8">
  <%= render 'csv_import_form' %>
  <%= render 'search_form' %>

  <%# データテーブル %>
  <div class="card bg-base-100 shadow-xl overflow-x-auto">
    <div class="card-body p-0">
      <table class="table table-zebra w-full">
        <thead>
          <tr>
            <th class="bg-base-200/50 font-bold">販売日</th>
            <th class="bg-base-200/50 font-bold whitespace-nowrap">注文番号</th>
            <th class="bg-base-200/50 font-bold">SKU</th>
            <th class="bg-base-200/50 font-bold">商品名</th>
            <th class="bg-base-200/50 font-bold text-right">売上（ドル）</th>
            <th class="bg-base-200/50 font-bold text-right">手数料（ドル）</th>
            <th class="bg-base-200/50 font-bold text-right">送料（円）</th>
            <th class="bg-base-200/50 font-bold text-right">仕入原価（円）</th>
            <th class="bg-base-200/50 font-bold text-right">その他原価（円）</th>
            <th class="bg-base-200/50 font-bold text-right">販売個数</th>
            <th class="bg-base-200/50 font-bold text-right">利益（円）</th>
            <th class="bg-base-200/50 font-bold text-right">利益率(%)</th>
            <th class="bg-base-200/50 font-bold">追跡番号</th>
          </tr>
        </thead>
        <tbody>
          <% @orders_data.each do |data| %>
            <tr class="hover:bg-base-200/30">
              <td><%= l(data[:sale_date], format: :default) if data[:sale_date] %></td>
              <td class="whitespace-nowrap font-medium"><%= data[:order].order_number %></td>
              <td class="max-w-[200px] truncate" title="<%= data[:sku_codes] %>">
                <%= data[:sku_codes] %>
              </td>
              <td class="max-w-[200px] truncate" title="<%= data[:product_names] %>">
                <%= data[:product_names] %>
              </td>
              <td class="text-right font-medium">
                <%= number_to_currency(data[:revenue], unit: '$', precision: 2, format: '%u%n') %>
              </td>
              <td class="text-right text-error">
                <%= number_to_currency(data[:payment_fees], unit: '$', precision: 2, format: '%u%n') %>
              </td>
              <td class="text-right text-error">
                <%= number_to_currency(data[:shipping_cost], unit: '¥', precision: 0, format: '%u%n') %>
              </td>
              <td class="text-right text-error">
                <%= number_to_currency(data[:procurement_cost], unit: '¥', precision: 0, format: '%u%n') %>
              </td>
              <td class="text-right text-error">
                <%= number_to_currency(data[:other_costs], unit: '¥', precision: 0, format: '%u%n') %>
              </td>
              <td class="text-right font-medium"><%= data[:quantity] %></td>
              <td class="text-right font-bold text-success">
                <%= number_to_currency(data[:profit], unit: '¥', precision: 0, format: '%u%n') %>
              </td>
              <td class="text-right font-medium">
                <%= number_with_precision(data[:profit_rate], precision: 1) %>%
              </td>
              <td class="whitespace-nowrap font-medium"><%= data[:tracking_number] %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="mt-6">
    <%= paginate @orders %>
  </div>
</div>
